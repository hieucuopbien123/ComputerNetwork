Tài liệu: slide, vở, txt

VNNIC là quản lý tên miền ở VN, cung số liệu cũng như liên kết với internet quốc tế. Nó quản lý các subdomain như chia ra VD hust.edu.vn được chia ra từ edu.vn
VNIX là hệ thống chuyển đổi giữa các nhà mạng. Các ISP liên kết với nhau thông qua các hệ thông VNIX ở các thành phố và liên kết cả ra các nước khác.

Chỉ cần ghi nhớ thứ tự: physical layer truyền bit qua dây, data link truyền trong mạng, network truyền tới distant, transport là các giao thức TCP UDP truyền giữa các ứng dụng, 3 tầng còn lại của OSI toàn kiểu encode hay truyền tin trong cùng 1 ứng dụng k quan trọng được gộp làm 1 trong TCP/IP.
VD: cái network có thể gắn IP header để truyền tới IP ở xa, còn data link là network interface chỉ truyền trong mạng thì có thể gắn local là Ethernet frame.
VD: cái datalink layer k có nghĩa là chỉ dùng khi ứng dụng đích cùng mạng local với máy source mà gói tin luôn được truyền qua nhiều node, tức cái data link sẽ định nghĩa cách truyền tin giữa máy hiện tại và máy tiếp theo trong cùng mạng. A -> intermediate nodeX -> intermediate nodeY -> B thì data link của A định nghĩa liên kết nodeX, datalink của nodeX định nghĩa liên kết nodeY,...

Header các tầng trên k đổi nhưng header từ tầng mạng trở đi thay đổi qua từng node trung gian vì nó chỉ có IP header là trỏ tới đích còn các header khác bên dưới toàn là đủ để trỏ tới intermediate node tiếp theo. Khi node đó nhận sẽ gỡ các header trỏ tới node đó và lại gắn vào header trỏ tới node tiếp theo, do đó header tầng cuối đổi lúc thì là Ethernet header, lúc thì là WDM header tùy vào node tiếp theo nó dùng cái gì để liên kết với node này. Khi đến đích thì các header tầng trên mới dần bị loại bỏ hết.

Identification on internet. Port IP MAC address. Domain name - 1 dạng khác của IP address. DNS.

DNS là server global vì tắt mạng đi k dùng được nslookup nx.

MAC Address và IP Address đều xác định duy nhất 1 máy nhưng tại sao người ta k chỉ dùng 1 trong 2 mà phải dùng cả 2. Bởi vì MAC Address là cố định xác định NIC do nhà sản xuất đặt ra, nếu ta tạo 1 hệ thống khép kín k tương tác với mạng global internet thì dùng MAC address luôn được vì tầng data link cho phép truyền dữ liệu trực tiếp giữa các máy bằng MAC Address nhanh mà k cần convert từ IP mà thậm chí chả cần IP. Còn IP dùng trong hệ thống cần tương tác với global internet, nó có 1 tầng riêng. Các máy ở cực xa nhau k thể biết MAC address của nhau được nhưng truy xuất được IP address của nhau nên phải dùng cả 2.

Modem chính là thiết bị chuyển từ digital <-> analog

DCE có data hỗ trợ vc truyền tin và k thể truyền. DTE làm nhiệm vụ truyền qua media khi kết nối được với media. Kết hợp 2 cái lại là 1 interface truyền tin. Các thiết bị khi truyền cho nhau sẽ dùng cái interface này
VD: DCE cung interface chứa các thứ như độ dài 1 pulse, encoding method, level of voltage,.. và DTE gọi vào nó để truyền tới đích. VD về DCE trong slide.

DC component là có khả năng xảy ra TH chỉ 1 đường nằm ngang. Thì NRZ nếu chỉ cho 1 loại bit có thể luôn xảy ra nằm ngang. 

Tần số của line(hay signal) là f thì data rate của NRZ-L hiển nhiên cũng là f vì nó y hệt biểu diễn signal, data rate của Manchester lại là f/2. Còn tần số của Manchester lại gấp đôi là 2f, tần số của NRZ-L là f.
Phân biệt data rate 100Mbps và tần số 100MHz:
Data rate đo tốc độ truyền tải gói tin qua đường truyền kỹ thuật số còn tần số là tốc độ truyền sóng trong 1s và = 1/chu kỳ. Bất cứ khi nào có sóng thì đều có thể dùng khái niệm tần số.
So sánh data rate của 2 PP là kiểu ở phía receiver nhận được cùng 1 lượng bit thì data thực sự mà nó nhận được là bao nhiêu(tách biệt trục thời gian). Hay nói cách khác data rate đo tốc độ system chuyển giữa 2 trạng thái on và off. Nếu tính trung bình thì data rate của manchester bằng 1 nửa NRZ-L vì 1 bit nó dùng 2 pulse tức chuyển đổi 2 lần còn NRZ-L chỉ đổi 1 phát ở đầu bit nên manchester chuyển trạng thái nhanh hơn. VD phía receiver nhận 4 bit thì NRZ-L sẽ thực sự nhận 4 bit data mới còn Manchester thì receiver chỉ thực sự nhận 2 bit data có nghĩa mà thôi tức manchester bằng 1 nửa NRZ-L. Về đơn vị megabit trên 1s thì k hiểu lắm, chắc nó cho kiểu đồng bộ 1 trục thời gian thì cùng 1 lượng bit được truyền qua. 
Tần số thì man gấp đôi NRZ-L vì số pulse 1s thực tế của sóng nó gấp đôi cơ mà.
=> Nch là Manchester gấp đôi tần số của NRZ-L và NRZ-I còn data rate thì bằng 1 nửa. Tần số và data rate của NRZ-L và signal ban đầu là bằng nhau => Cứ compare với NRZ-L

StopAndWait thích hợp với size lớn, k hợp với size nhỏ vì dù size nào nó cũng phải chờ delay phần RTT time chờ Sender nhận về ACK nên 1 lần gửi big size sẽ lợi hơn. Nhưng nếu big size thì buffer của Receiver có thể k đáp ứng được và cứ 1 lần gửi big size thì dễ error mà cứ error là gửi lại big size cũng tốn. Ở đây ta đang nói chức năng của datalink layer thao tác với các node adjacent mà trong các hệ thống shared medium tức nhiều máy dùng chung 1 thiết bị dây chẳng hạn mà 1 lần gửi big size tức 1 máy chiếm cái dây đó quá lâu sẽ k tốt.


LAN:
Ethernet standard xác định trong 2 tầng datalink và physical. 2 tầng này có các attribute khác nhau tạo ra Ethernet có tính chất khác nhau. Trong đó MAC của datalink dùng CSMA/CD là 1 loại Ethernet là classical ethernet. 
Thông thường khi A gửi tin cho B thì A kb MAC address of B mà chỉ biết IP of B mà thôi. A phải boardcast ARP package chứa IP của B để truyền qua mạng và B nhận được sẽ trả lại MAC của B cho A lưu vào. Có MAC Address sẽ gửi nhanh hơn à?

Standard 802.11 LAN có access point và base station. Access Point là nơi các thiết bị connect vào để giao tiếp với nhau theo các chuẩn đã được xác định ở trong Point đó, Base station là là nơi các thiết bị connect vào để connect ra bên ngoài. Có 2 mode là Base station mode thì 2 cái tách rời nhau, Ad hoc mode thì base station cũng là Access Point luôn. Chuẩn này cũng dùng CSMA/CA for multiple access control. 
Band đuộc chia thành nhiều channel tách rời nhau, mỗi quốc gia có số lượng channel tùy và station phải connect với 1 access point. Nó thực hiện điều này bằng cách scan từng channel và bắt các beacon frame chứ ID và MAC của AP rồi chọn 1 AP để connect. Có 2 kiểu scan là passive và active.

Trong thực tế rất khó để collision detection trong môi trường k dây. Ta đang giả sử các node trong mạng LAN tương tác với nhau.
S check nếu channel liên kết với R có available trong khoảng thời gian DIFS time hay không. Nếu có thì gửi toàn bộ frame. Nếu bận thì chờ đợi 1 khoảng thời gian random gọi là back-off. Sau backoff thì send data, nếu k nhận được ACK của cục vừa send(tức là channel vẫn chưa available) thì nhân đôi backoff và lại chờ và cứ tiếp tục như v. Do wireless truyền tin kp dễ dàng nên khó bắt phải làm như v. Phía receiver chỉ cần chờ nhận frame thì gửi lại ACK sau SIFS thôi. 

Để avoid collision thì R có reserve channel k có random access để k ai gửi tới nó bừa bãi, rồi S có thể gửi RTS tới R bằng CSMA. Đặc điểm của frame này là rất ngắn nên ít khi xảy ra collision(càng lớn càng dễ collision). R sẽ boardcast trả lại CTS. Mọi station nhận CTS có thể gửi data frame tiếp, các station khác chậm chân sẽ phải cancel và chờ tiếp. Hình slide 33 của LAN khá hay. 
Khi gửi data thì trong data có gắn thêm frame với các trường như VD trong slide. AP có address của source là H1, address của router R1. Ngoài ra còn nhiều trường khác như thời gian reservation channel của R, loại frame là ACK hay gì,..

Classes of IP address: khi byte đầu có giá trị nằm trong khoảng
A: 0 -> 127
B: 128 -> 191
C: 191 -> 223

Phân biệt: network interface, host, subnetwork, router. 
router là 1 thiết bị trong mạng
interface là từng port của router, nó giống như 1 IP address
host là 1 node trong mạng
subnetwork(subnet) là tập hợp nhiều host có interface cùng prefix, là 1 phần nhỏ của network. VD 1 nhánh của router.
=> nch khái niệm interface và IPaddress giống nhau là xong, chỉ là nói 2 cái cho khó hiểu.
=> Họ cho rằng IP address gắn với đúng ra là interface chứ kp là host hay router, tức interface nó như 1 lớp chứa 1 IP address của từng thiết bị v. 1 router có nhiều interface và 1 host có thể có nhiều interface. 

NetID gọi đầy đủ là network address. Khi yêu cầu tính network address là ta tính ra giá trị 4 bytes khi host address tất cả bit đều là 0, address này được reserved for host. Ngược lại host address chính là IP address bình thường đầy đủ. Trong đó còn có broadcast address là address mà mọi host id đều là 1, address này dùng để gửi data tới mọi host trong mạng.
=> Tức 2 address mà hostId toàn 0 với 1 đã được đặt trước, k thể assign cho 1 node nào 2 address đó cả => bẫy khi chia IP thành subnet.
Thực tế họ sẽ cố gắng divide số lượng IP ra nhiều nhất có thể miễn bao đủ lượng host. 1 host tràn ra ngoài 2^n cũng phải dùng thêm 1 bit nx để biểu diễn subnet đó.

Layer 1 device là các thiết bị connect mạng bình thường. Layer 2 device là các device forward data dựa vào MAC address như hub, switch,...

Có 1 cái rất hay trong IP header là upper layer protocol xác định các transport protocol như TCP, UDP hoặc các protocol được đóng gói trong IP package như ICMP, IGMP, OSPF. Trong đó ICMP có 1 phần riêng nói về nó. 

ICMP:
IP k đáng tin nên cần ICMP giúp exchange error info giữa S và R. ICMP là protocol above IP. Nó gắn vào IP header 1 ICMP message gồm type, code và checksum, data và các phần khác của header. Có nhiều loại type error ICMP khác nhau. ICMP vô hình với user và có thể dùng debugging tool như ping, traceroute để dùng ICMP. Ping gửi ICMP request và nhận ICMP reply, trường data chứa timestamp để tính RTT. Traceroute khác ở chỗ nó gửi package với TTL tăng dần, mỗi khi TTL giảm về 0 thì router destroy package đó và send back Sender ICMP packet chứa IP của router, từ đó biêt được TTL của đích đến và tính được RTT luôn. Trace router khi đã gọi chỉ dừng lại khi ICMP echo rằng đã tới đích or nhận được ICMP message 'host unreachable'

Layer 2 có MTU thì package chỉ cho size MTU max được truyền qua, lớn hơn sẽ break thành nhiều gói. Mỗi gói mang có 1 IP header riêng và có 1 ID riêng. ID đó nằm trong trường identifier 16bit của header.
TTL sinh ra để tránh bad routing khi 2 router A và B cứ forward mãi loop cho nhau. Trường header checksum là error detection code chỉ check error for header thôi, qua mỗi router nó đều check.
ICMP thì A forward qua nhiều router và khi bị lỗi thì nó lại forward message lỗi lần lượt qua chiều ngược lại các router về nguồn. 

Trong cùng mạng thì gửi TT, khác mạng thì phải gửi qua interface của 1 router khác định nghĩa trong routing table. Routing table được build bởi routing protocol khi compute path cho router đó.

Trap: VD có 5 bit cho host thì max dùng được 30 host trong mạng chứ kp 29, vì 5 bit tức ta dùng được 32 host từ 0 -> 31 nhưng 0 toàn bit 0 và 31 toàn bit 1 ta k được dùng nên chỉ còn 30 host.

VD: 
203.178.142.128 /25 => network address vì 128 là 10000000
203.178.142.128 /24 => host address
203.178.142.127 /25 => broadcast
203.178.142.127 /24 => host address vì 127 là 01111111

Router có vai trò routing forward package to subnetwork nào. Interface nối với từng port của router coi là 1 host riêng và mọi host trong subnet đó đều cùng network address chứ kp cái interface phải toàn 0 hay toàn 1 gì cả nhé. 
Administrator của network chịu trách nhiệm assign ip address có subnet mask cho các host bên trong or thích chia ra nhiều subnet thoải mái tùy vào vc chia cái subnet mask như nào. Cứ tăng cái subnetmask lên 1 là 1 lần chia đôi lượng IP ra làm 2 subnet khác nhau và cái bit cuối của subnetmask là 0 và là 1 là 2TH chia đôi. Tương tự dùng 2 bit của host address để chia 4.

IP có 5 class. VD:
10.10.10.9 thuộc class A; 192.168.70.5 thuộc class C.
Class C có 256 host, nếu dùng 300 host thì cần chuyển sang class B, tùy biến.


Private address chỉ usable inside a local network và là unique trong local, ở ngoài có thể trùng. Các address đb giúp xử lý vấn đề thiếu address vì lượng address là k đủ nếu cái gì cũng unique nên trong phạm vi local mới sinh ra nhiều address đặc biệt. Outside communication phải dùng public address(là address bth ta biết).
loopback address là address mà khi ta gửi tới thì sẽ tự gửi tới chính máy ta, dùng cho development. VD khi mang máy đến computer room thì từng máy sẽ được assigned 1 private address.
Multicast address là address assigned cho group of port. Khi cần biểu diễn group of host phải dùng nó. 

Khi 1 máy giao tiếp với 1 máy khác trong cùng network, nó dùng private address, khi giao tiếp với 1 máy khác ngoài network, nó gửi package tới router thì router sẽ dùng 1 mechanism gọi là network address translation để translate address thành public address và thực hiện tiếp forward như bth. Router sẽ có 1 set of public address, mỗi khi có host muốn giao tiếp với bên ngoài, nó sẽ take 1 public address từ set để assign cho host đó và thực hiện forward communation => bản chất là như v. Nên 1 máy khi connect ra bên ngoài, IP address của nó có thể đổi. Nó có thể repace address với public address dùng RoundRobin.
Còn có Port Address Translation(PAT) là mở rộng của Network Address Translation(NAT). Thay vì router có 1 set các pubaddress, nó chỉ có 1 single pubaddress. Mọi host muốn communicate outside sẽ dùng chung 1 public ip address. Để phân biệt các host khác nhau thì nó assign port khác nhau cho các host khác nhau và associate cái address kia với các port. 

Break mind: thực chất có 2 loại IP là classful IP address và IP address dùng CIDR. Khi 1 IP mà k thấy có mask tức là loại IP đó là classful IP address. CIDR là 1 PP khắc phục nhược điểm của classful IP address về vc chia các address space.

Route aggregation là vc chia thành nhiều router để giảm kích thước của routing table lưu trong memory của router.

Dạng bài về routing table cứ chuyển hết byte cuối sang binary rồi chơi.

Thực tế host cũng có route table xem bằng "netstat -rn"
Netmask thực tế họ biểu diễn như IP cơ. VD: 255.255.240.0 là 11111111.11111111.11110000.00000000 tức số bit 1 từ trái qua là số netmask ở đây là 20

Người ta thg dùng default route 0.0.0.0/0 để connect ra internet. 



